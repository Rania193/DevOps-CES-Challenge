# ConfigMap with custom FastAPI code
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-webapp-code
data:
  main.py: |
    from fastapi import FastAPI

    app = FastAPI()

    @app.get("/")
    def read_root():
        return {
            "message": "Welcome to Datavisyn DevOps Challenge!",
            "project": "Kubernetes + GitOps Demo",
            "stack": ["EKS", "Terraform", "ArgoCD", "Helm", "OAuth2", "cert-manager"],
            "status": "running"
        }

